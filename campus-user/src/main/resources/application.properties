# ============================================================
# Application Configuration
# ============================================================
spring.application.name=campus-user

# ============================================================
# Server Configuration
# ============================================================
server.port=8085

# ============================================================
# Database Configuration
# ============================================================
spring.datasource.url=jdbc:mysql://jiafound-db.mysql.database.azure.com:3306/campus_lost_found
spring.datasource.username=campus_user
spring.datasource.password=CcAaMmPpUuSs20260105
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Hikari Connection Pool (优化连接池配置)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-test-query=SELECT 1

# ============================================================
# MyBatis-Plus Configuration
# ============================================================
# 关闭SQL日志以提升生产环境性能（开发时可改为org.apache.ibatis.logging.stdout.StdOutImpl）
# mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.mapper-locations=classpath*:mapper/**/*.xml
mybatis-plus.type-aliases-package=org.example.campususer.entity
mybatis-plus.global-config.db-config.id-type=assign_uuid
mybatis-plus.global-config.db-config.logic-delete-field=deleted
mybatis-plus.global-config.db-config.logic-delete-value=1
mybatis-plus.global-config.db-config.logic-not-delete-value=0

# ============================================================
# Jackson Date Format Configuration
# ============================================================
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=GMT+8

# ============================================================
# WeChat Mini Program Configuration
# ============================================================
#TODO
# 暂时用了我自己的测试号appid和secret
wechat.appid=wx179a2da9b9be73ab
wechat.secret=74d94df27a712bcd115dd5296ce7935f
wechat.grant-type=authorization_code

# ============================================================
# JWT Configuration
# ============================================================
jwt.secret=jiafound_campus_lost_found_jwt_secret_key_2026_change_this_in_production
jwt.expiration=86400000
# JWT Token Header
jwt.header=Authorization
jwt.prefix=Bearer 

# ============================================================
# Mail Configuration (QQ Mail Example)
# ============================================================
spring.mail.host=smtp.qq.com
spring.mail.port=587
spring.mail.username=3246656582@qq.com
spring.mail.password=tdolxeonxhghciid
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.enable=false
spring.mail.default-encoding=UTF-8
# Mail sender info
mail.from.name=\u6821\u56ED\u5931\u7269\u62DB\u9886\u7CFB\u7EDF
mail.from.address=${spring.mail.username}

# ============================================================
# Redis Configuration
# ============================================================
# Redis 服务地址（使用远程Redis服务器，与campus-item保持一致）
spring.data.redis.host=nas.saikewei.tech
spring.data.redis.port=36089
spring.data.redis.password=RrEeDdIiSs20260108
spring.data.redis.database=0
spring.data.redis.timeout=5000ms
# Redis Connection Pool (Lettuce)
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# ============================================================
# File Upload Configuration
# ============================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

# ============================================================
# Azure Blob Storage Configuration
# ============================================================
# Azure Blob Storage SAS URL for avatar uploads
# 注意：与 audit 分支共用 dispute-image 容器，通过文件名前缀区分
# 用户头像文件名格式：avatar/{uuid}-{filename}
azure.storage.sas-url=https://jiafound.blob.core.windows.net/dispute-image?sp=racwli&st=2026-01-08T15:26:53Z&se=2026-01-20T23:41:53Z&sv=2024-11-04&sr=c&sig=hb3lTmGpOFyYE5IM1mNS0IMclmBUkK3AnLR7V7Mn6sA%3D

# Legacy local file upload configuration (deprecated, kept for reference)
# file.upload.path=/tmp/uploads/
# file.upload.path=D:/jiafound/uploads/
# file.upload.url-prefix=http://localhost:8085/uploads/

# ============================================================
# Logging Configuration (优化日志性能)
# ============================================================
logging.level.root=INFO
logging.level.org.example.campususer=INFO
logging.level.org.springframework.web=WARN
logging.level.org.example.campususer.service.impl.UsersServiceImpl=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ============================================================
# Actuator Configuration (Optional)
# ============================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
